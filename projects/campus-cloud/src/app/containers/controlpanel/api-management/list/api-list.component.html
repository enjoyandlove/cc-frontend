<div class="row">
  <div class="col-3">
    <cp-api-how-to-use></cp-api-how-to-use>
  </div>

  <div class="col-9">
    <cp-api-topbar></cp-api-topbar>

    <ng-container [ngSwitch]="loading$ | async">

      <cp-spinner *ngSwitchCase="true"></cp-spinner>

      <ng-container *ngSwitchCase="false">
        <ng-container *ngIf="(items$ | async).length">
          <div class="list row" *ngFor="let item of (items$ | async); trackBy: trackByFn">
            <div class="col-12 no-left-padding no-right-padding">
              <div class="row">
                <div class="col-9">
                  <label class="list__key-id-label">{{ item.name }}</label>
                  <label class="list__key-id">{{ item.key_id }}</label>
                </div>
                <div class="col-3 text-right list__timestamp">
                  {{ 't_shared_created' | cpI18n }}: {{ item.created | cpDatePipe: dateFormat}}
                </div>
              </div>

              <div class="row list__separator">
                <div class="col-9">
                  <cp-api-management-key
                    [key]="item.api_key">
                  </cp-api-management-key>
                </div>

                <div class="col-3 text-right list__actions">
                  <button
                    type="button"
                    class="list__revoke cpbtn cpbtn--no-border cpbtn--no-padding cpbtn--ghost">
                    {{ 't_shared_revoke' | cpI18n }}
                  </button>

                  <button
                    type="button"
                    class="list__edit cpbtn cpbtn--no-border cpbtn--no-padding cpbtn--ghost cpbtn--link-dark">
                    {{ 't_shared_edit' | cpI18n }}
                  </button>
                </div>
              </div>
            </div>
          </div>

          <cp-pagination
            (next)="onPaginationNext($event)"
            [pageNext]="(pagination$ | async)?.next"
            [pagePrev]="(pagination$ | async)?.previous"
            (previous)="onPaginationPrevious($event)"
            [pageNumber]="(pagination$ | async)?.page">
          </cp-pagination>
        </ng-container>
      </ng-container>
    </ng-container>
  </div>
</div>
