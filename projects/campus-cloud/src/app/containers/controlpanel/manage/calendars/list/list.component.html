<div class="row">
  <div class="col-12">
    <cp-calendars-list-action-box (search)="onSearch($event)"
                                  (launchCreateModal)="onLaunchCreateModal()">
    </cp-calendars-list-action-box>
  </div>
</div>

<div [ngSwitch]="loading">
  <cp-spinner *ngSwitchCase="true"></cp-spinner>

  <div *ngSwitchCase="false">
    <cp-no-content class="no-content"
                   *ngIf="!state.calendars.length"
                   [noContentText]="cpI18n.translate('calendars_no_results_found')">
    </cp-no-content>

    <div *ngIf="state.calendars.length">
      <cp-table [columns]="columns"
                [rows]="rows"></cp-table>
      <cp-pagination [pageNext]="pageNext"
                     [pagePrev]="pagePrev"
                     [pageNumber]="pageNumber"
                     (next)="onPaginationNext()"
                     (previous)="onPaginationPrevious()">
      </cp-pagination>
    </div>
  </div>
</div>

<cp-modal modalId="calendarsCreate"
          *ngIf="launchCreateModal">
  <cp-calendars-create (created)="onCreated($event)"
                       (resetCreateModal)="launchCreateModal = false">
  </cp-calendars-create>
</cp-modal>

<cp-modal modalId="calendarDelete"
          *ngIf="launchDeleteModal">
  <cp-calendars-delete [calendar]="selectedCalendar"
                       (deleted)="onDeleted($event)"
                       (teardown)="onDeleteTeardown()">
  </cp-calendars-delete>
</cp-modal>

<cp-modal modalId="calendarEdit"
          *ngIf="launchEditModal">
  <cp-calendars-edit [calendar]="selectedCalendar"
                     (edited)="onEditedLink($event)"
                     (reset)="launchEditModal = false">
  </cp-calendars-edit>
</cp-modal>

<ng-template #customMainCell
             let-row="row">
  <a cpTracker
     [routerLink]="row.id"
     [eventData]="eventData">
    <cp-table-rich-cell [subheading]="row.description">
      <h2>{{ row.name }}</h2>
    </cp-table-rich-cell>
  </a>
</ng-template>

<ng-template #actionCell
             let-calendar="row">
  <div class="cell-actions">
    <button type="button"
            data-toggle="modal"
            data-target="#calendarEdit"
            (click)="launchEditModal = true"
            (click)="selectedCalendar = calendar"
            class="hover action-button text-right unstyled-button">
      <i class="material-icons"
         aria-hidden="true">mode_edit</i>
    </button>
    <button type="button"
            data-toggle="modal"
            data-target="#calendarDelete"
            (click)="launchDeleteModal = true"
            (click)="selectedCalendar = calendar"
            class="hover action-button delete-button text-center unstyled-button">
      &times;
    </button>
  </div>
</ng-template>