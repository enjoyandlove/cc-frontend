<form [formGroup]="form">
  <div class="col">
    <div class="row">
      <div class="col-12">
        <p class="title">{{ 'events_event_banner' | cpI18n }}</p>
        <div class="margin-top">
          <cp-image-upload (uploaded)="onUploadedImage($event)"
                           [defaultImage]="form.controls['poster_url'].value"
                           [required]="formError && form.get('poster_url').invalid">
          </cp-image-upload>
        </div>
      </div>
    </div>

    <div class="row event-details">
      <div class="col-12">
        <p class="title">{{ 'events_event_details' | cpI18n }}</p>
        <div class="form-group margin-top">
          <label id="title">{{ 'events_event_name' | cpI18n }}</label>
          <input for="title"
                 type="text"
                 class="form-control"
                 formControlName="title"
                 [class.error]="formError && form.get('title').invalid" />
        </div>

        <div class="row form-group"
             *ngIf="!isClub && !isService && !isOrientation">
          <div class="col-12">
            <label>{{ 'select_host' | cpI18n }}</label>
            <cp-dropdown [items]="stores"
                         [selectedItem]="selectedHost"
                         (selected)="onSelectedHost($event)"
                         [isRequiredError]="formError && form.get('store_id').invalid">
            </cp-dropdown>
          </div>
        </div>

        <div class="row form-group">
          <div class="col-6">
            <label for="start">{{ 'start_date' | cpI18n }}</label>
            <ready-ui-popover>
              <input id="start"
                     type="text"
                     readonly="readonly"
                     uiPopoverYOffset="0"
                     readyUiPopoverTrigger
                     [class.error]="formError && form.get('start').invalid"
                     [value]="form.get('start').value ? (form.get('start').value | cpDatePipe: dateFormat) : ''" />
              <ready-ui-date-picker (dateChange)="setStart($event)"
                                    (click)="$event.stopPropagation()"
                                    [timeLabel]="'t_shared_select_time' | cpI18n"
                                    [initialDate]="form.get('start').value * 1000 || undefined">
              </ready-ui-date-picker>
            </ready-ui-popover>
          </div>
          <div class="col-6">
            <label for="end">{{ 'end_date' | cpI18n }}</label>
            <ready-ui-popover>
              <input id="end"
                     type="text"
                     readonly="readonly"
                     uiPopoverYOffset="0"
                     readyUiPopoverTrigger
                     [class.error]="formError && form.get('end').invalid"
                     [value]="form.get('end').value ? (form.get('end').value | cpDatePipe: dateFormat) : ''" />
              <ready-ui-date-picker (dateChange)="setEnd($event)"
                                    (click)="$event.stopPropagation()"
                                    [timeLabel]="'t_shared_select_time' | cpI18n"
                                    [initialDate]="form.get('end').value * 1000 || undefined">
              </ready-ui-date-picker>
            </ready-ui-popover>
          </div>
        </div>

        <div class="row form-group"
             *ngIf="isOrientation">
          <div class="col-12">
            <cp-checkbox class="checkbox"
                         [label]="'all_day' | cpI18n"
                         (toggle)="onAllDayToggle($event)"
                         [isChecked]="form.controls['is_all_day'].value">
            </cp-checkbox>
          </div>
        </div>

        <div class="form-group">
          <label
                 for="description">{{ 'events_event_description' | cpI18n }}</label>
          <textarea id="description"
                    formControlName="description"></textarea>
        </div>

        <div class="row form-group">
          <div class="col-12">
            <cp-checkbox class="checkbox"
                         [isChecked]="showLocationDetails"
                         (toggle)="onLocationToggle($event)"
                         [label]="'t_shared_label_location_toggle' | cpI18n">
            </cp-checkbox>
          </div>
        </div>

        <div *ngIf="showLocationDetails">
          <div class="row">
            <div class="col-12">
              <label>{{ 'location' | cpI18n }}</label>
              <div class="row form-group">
                <div class="col-12">
                  <cp-place-autocomplete [newAddress]="newAddress"
                                         (backToDefault)="onResetMap()"
                                         (placeChange)="onPlaceChange($event)"
                                         [defaultValue]="form.controls.address.value"
                                         [isRequired]="formError && form.get('address').invalid">
                  </cp-place-autocomplete>
                </div>
              </div>
              <div class="row form-group">
                <div class="col-6">
                  <label id="location">{{ 'building' | cpI18n }}</label>
                  <input for="location"
                         type="text"
                         class="form-control"
                         formControlName="location" />
                </div>

                <div class="col-6">
                  <label for="room_data">{{ 'room' | cpI18n }}</label>
                  <input id="room_data"
                         type="text"
                         class="form-control"
                         formControlName="room_data" />
                </div>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-12">
              <div class="maps">
                <cp-maps [center]="mapCenter"
                         [drawMarker]="drawMarker"
                         (mapSelection)="onMapSelection($event)">
                </cp-maps>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</form>