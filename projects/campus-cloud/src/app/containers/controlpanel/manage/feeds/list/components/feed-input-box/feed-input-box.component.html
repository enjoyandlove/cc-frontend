<div class="row">
  <div class="col-12">
    <div [class]="[replyView ? '' : 'cp-card']">
      <form [formGroup]="form">
        <div class="row form-group">
          <div class="col-6 text-left">
            <p class="text-muted maxLength">
              {{ form.controls.message.value ? form.controls.message.value.length : 0 }}/500
            </p>
          </div>
          <div class="col-6 text-right">
            <label class="error"
                   *ngIf="imageError">{{ imageError }}</label>
            <cp-upload-button [buttonText]="cpI18n.translate('button_add_photo')"
                              buttonClass="cpbtn cpbtn--link"
                              (fileUpload)="onFileUpload($event)">
            </cp-upload-button>
          </div>
        </div>
        <div class="row form-group">
          <div class="col-12">
            <div class="editor">
              <div class="editor__wrapper">
                <div class="editor__element"
                     cpTextEditor
                     formControlName="message"
                     [placeholder]="'feeds_input_placeholder' | cpI18n"></div>
                <div class="editor__images">
                  <div class="editor__image--wrapper"
                       *ngFor="let imageSrc of form.get('message_image_url_list').value">
                    <button type="button"
                            class="unstyled-button"
                            (click)="onDeleteImage()">&times;</button>
                    <img [attr.src]="imageSrc"
                         alt="">
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <ready-ui-stack
                        [alignment]="!state.group && state.isCampusWallView ? 'between' : 'end'">
          <ng-container *ngIf="!state.group && state.isCampusWallView">
            <ready-ui-stack>
              <span>{{ 'feeds_post_as' | cpI18n }}</span>
              <cp-dropdown class="dropdown"
                           [items]="stores$ | async"
                           (selected)="onSelectedHost($event)"
                           [selectedItem]="session.defaultHost">
              </cp-dropdown>
              <ng-container *ngIf="!replyView">
                <span>{{ 'feeds_post_to' | cpI18n }}</span>
                <cp-dropdown [reset]="reset$"
                             class="dropdown"
                             [items]="channels$ | async"
                             [selectedItem]="selectedItem.value"
                             (selected)="onSelectedChannel($event)">
                </cp-dropdown>
              </ng-container>
            </ready-ui-stack>
          </ng-container>
          <cp-button [props]="buttonData"
                     (buttonClick)="onSubmit(form.value)"> </cp-button>
        </ready-ui-stack>
      </form>
    </div>
  </div>
</div>