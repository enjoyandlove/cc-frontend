<div class="row">
  <div class="col-12">
    <cp-links-list-action-box
      (search)="onSearch($event)"
      (launchCreateModal)="onLaunchCreateModal()"
    >
    </cp-links-list-action-box>
  </div>
</div>

<div [ngSwitch]="loading">
  <cp-spinner *ngSwitchCase="true"></cp-spinner>

  <div *ngSwitchCase="false">
    <cp-no-content
      class="no-content"
      *ngIf="!state.links.length"
      [noContentText]="cpI18n.translate('links_no_results_found')"
    >
    </cp-no-content>

    <div *ngIf="state.links.length">
      <ul class="links cp-form">
        <li class="cp-form__header col-12">
          <div class="row">
            <cp-sorting-header
              class="col-5"
              sortLabel="name"
              (click)="doSort('name')"
              [label]="sortingLabels.name"
              [sortField]="state.sort.sort_field"
              [sortDirection]="state.sort.sort_direction"
            >
            </cp-sorting-header>

            <span class="col-6">{{ 'description' | cpI18n }}</span>
            <span class="col-1"></span>
          </div>
        </li>

        <li class="cp-form__item col-12" *ngFor="let link of state.links">
          <div class="row">
            <span class="col-5 text-truncate links__thumbnail">
              <img *ngIf="link.img_url !== ''" class="rounded img-fit-cover" [src]="link.img_url" />
              <img *ngIf="link.img_url === ''" class="rounded img-fit-cover" [src]="defaultImage" />

              <strong>
                <button
                  cpTracker
                  [eventData]="eventData"
                  (click)="onEdit(link)"
                  class="cpbtn cpbtn--link-dark"
                >
                  {{ link.name }}
                </button>
              </strong>
              <br />
              {{ link.link_url }}
            </span>
            <span class="col-6 text-truncate">
              {{ link.description }}
            </span>

            <span (click)="onLaunchDeleteModal(link)" class="col-1 hover delete-link text-right">
              &times;
            </span>
          </div>
        </li>
      </ul>

      <cp-pagination
        [pageNext]="pageNext"
        [pagePrev]="pagePrev"
        [pageNumber]="pageNumber"
        (next)="onPaginationNext()"
        (previous)="onPaginationPrevious()"
      >
      </cp-pagination>
    </div>
  </div>
</div>
