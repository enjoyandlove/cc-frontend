<div class="row">
  <div class="col-xs-12">
    <cp-links-list-action-box
      (search)="onSearch($event)"
      (launchCreateModal)="onLaunchCreateModal()">
    </cp-links-list-action-box>
  </div>
</div>

<div [ngSwitch]="loading">
  <cp-spinner *ngSwitchCase="true"></cp-spinner>

  <div *ngSwitchCase="false">
    <ul class="col-xs-12 cp-form">
      <div class="links">
        <li class="cp-form__header col-xs-12">
          <div class="row">
            <span class="col-sm-5 col-xs-12" i18n>
              Name
            </span>
            <span class="col-sm-6 col-xs-12" i18n>Description</span>
            <span class="col-sm-1 col-xs-12"></span>
          </div>
        </li>

        <li class="text-center" *ngIf="!state.links.length">
          <br>
          <p i18n><strong>No Links...</strong></p>
        </li>

        <li class="cp-form__item col-xs-12" *ngFor="let link of state.links">
          <div class="row">
            <span class="col-sm-5 col-xs-12 text-truncate links__thumbnail">
              <img class="img-rounded" [src]="link.img_url">

              <strong>
                <button
                  (click)="editLink = link"
                  class="cpbtn cpbtn--link-dark"
                  (click)="isLinksEdit = true"
                  data-toggle="modal" data-target="#linksEdit">
                  {{ link.name }}
                </button>
              </strong>
              <br>
              {{ link.link_url }}
            </span>
              <span class="col-sm-6 col-xs-12 text-truncate">
              {{ link.description }}
            </span>

            <span
              (click)="deleteLink = link;"
              (click)="isLinksDelete = true"
              data-toggle="modal" data-target="#linksDelete"
              class="col-sm-1 col-xs-12 hover delete-link">
              &times;
            </span>
          </div>
        </li>
      </div>
    </ul>

    <cp-pagination
      [pageNext]="pageNext"
      [pagePrev]="pagePrev"
      [pageNumber]="pageNumber"
      (next)="onPaginationNext()"
      (previous)="onPaginationPrevious()">
    </cp-pagination>
  </div>
</div>

<cp-modal modalId="linksCreate" *ngIf="isLinksCreate">
  <cp-links-create
    (createLink)="onCreatedLink($event)"
    (resetCreateModal)="isLinksCreate = false">
  </cp-links-create>
</cp-modal>

<cp-modal modalId="linksDelete" *ngIf="isLinksDelete">
  <cp-links-delete
    [link]="deleteLink"
    (deleteLink)="onDeletedLink($event)"
    (resetDeleteModal)="isLinksDelete = false">
  </cp-links-delete>
</cp-modal>

<cp-modal modalId="linksEdit" *ngIf="isLinksEdit">
  <cp-links-edit
    [link]="editLink"
    (editLink)="onEditedLink($event)"
    (resetEditModal)="isLinksEdit = false">
  </cp-links-edit>
</cp-modal>