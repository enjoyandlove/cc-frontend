<div class="row">
  <div class="col-xs-12">
    <cp-locations-list-top-bar
      (launchModal)="onLaunchModal()">
    </cp-locations-list-top-bar>
  </div>
</div>

<div [ngSwitch]="loading">
  <cp-spinner *ngSwitchCase="true"></cp-spinner>

  <div *ngSwitchCase="false">
    <cp-no-content
      class="no-content"
      *ngIf="!state.locations.length"
      noContentText="No locations found...">
    </cp-no-content>

    <div *ngIf="state.locations.length" class="row">
      <ul class="col-xs-12">
        <div class="cp-form">
          <div class="locations">
            <li class="cp-form__header col-xs-12">
              <div class="row">
                <span class="col-sm-5 col-xs-12" i18n>
                  Locations
                </span>
                <span class="col-sm-6 col-xs-12" i18n>Short Name</span>
                <span class="col-sm-1 col-xs-12"></span>
              </div>
            </li>

            <li class="cp-form__item col-xs-12" *ngFor="let location of state.locations">
              <div class="row">
                <span class="col-sm-5 col-xs-12 text-truncate">
                  <strong>
                    <button
                      class="cpbtn cpbtn--link-dark"
                      (click)="updateLocation = location"
                      (click)="isLocationsUpdate = !isLocationsUpdate"
                      data-toggle="modal" data-target="#locationsUpdate">
                      {{ location.name }}
                    </button>
                  </strong>
                  <br>
                  {{ location.address }}
                </span>
                  <span class="col-sm-6 col-xs-12 text-truncate">
                  {{ location.short_name }}
                </span>

                <span
                  (click)="deleteLocation = location;"
                  (click)="isLocationsDelete = true"
                  data-toggle="modal" data-target="#locationsDelete"
                  class="col-sm-1 col-xs-12 hover delete-location">
                  &times;
                </span>
              </div>
            </li>
          </div>
        </div>
      </ul>

      <cp-pagination
        [pageNext]="pageNext"
        [pagePrev]="pagePrev"
        [pageNumber]="pageNumber"
        (next)="onPaginationNext()"
        (previous)="onPaginationPrevious()">
      </cp-pagination>
    </div>
  </div>
</div>

<cp-modal
  modalId="locationsCreate"
  *ngIf="isLocationsCreate">
  <cp-locations-create
    (locationCreated)="onLocationCreated($event)"
    (teardown)="isLocationsCreate = !isLocationsCreate">
  </cp-locations-create>
</cp-modal>

<cp-modal modalId="locationsDelete">
  <cp-locations-delete
    [location]="deleteLocation"
    (locationDeleted)="onLocationDeleted($event)">
  </cp-locations-delete>
</cp-modal>

<cp-modal
  modalId="locationsUpdate"
  *ngIf="isLocationsUpdate">
  <cp-locations-update
    [location]="updateLocation"
    (locationUpdated)="onLocationUpdated($event)"
    (teardown)="isLocationsUpdate = !isLocationsUpdate">
  </cp-locations-update>
</cp-modal>