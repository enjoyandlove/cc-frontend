<div class="cpmodal">
  <div class="cpmodal__header">
    <div class="row">
      <div class="col-xs-12 text-center">
        <span i18n><strong>Select Services</strong></span>

        <span
          data-dismiss="modal"
          class="pull-right hover cpmodal__header__close">
          &times;
        </span>
      </div>
    </div>
  </div>

  <div class="cpmodal__body">
    <div class="col-xs-4 services-list">
      <div class="row services-list__search-box">
        <div class="col-xs-12">
          <cp-searchbox (query)="query = $event"></cp-searchbox>
        </div>
      </div>

      <div class="row">
        <ul class="col-xs-12 services-list__results">
          <li class="cp-form__item"
            *ngFor="let service of state.selected | cpTeamFilterPipe:{query: query, filterBy: 'name'}">
            <div class="row">
              <span class="col-xs-10" i18n>
                <div class="row">
                  <div class="col-sm-3 col-xs-12 services-list__thumbnail">
                    <img class="img-rounded img-responsive" [src]="service.data.logo_url">
                  </div>
                  <div class="col-sm-9 col-xs-12 text-truncate no-left-padding">
                    <strong>
                      <a [routerLink]="[service.id]">{{ service.data.name }}</a>
                    </strong>
                    <br>
                    {{ service.data.description }}
                  </div>
                </div>
              </span>
              <span
                class="col-xs-2">
                <cp-checkbox
                  class="checkbox"
                  [isChecked]="service.checked"
                  (toggle)="onCheckedService($event, service)">
                </cp-checkbox>
              </span>
            </div>
          </li>
        </ul>
      </div>
    </div>
    <div class="col-xs-8 services-list">
      <div class="row">
        <div class="col-xs-12">
          <p class="title" i18n>Selected</p>
          <div class="row">
            <ul class="col-xs-12 services-list__results services-list__results--full-height">
              <li class="cp-form__item col-xs-12" *ngFor="let service of state.selected | cpTeamSelectedPipe">
                <div class="row" *ngIf="service.checked">
                  <span class="col-xs-9" i18n>
                    <div class="row">
                      <div class="col-sm-2 col-xs-12 services-list__thumbnail">
                        <img class="img-rounded img-responsive" [src]="service.data.logo_url">
                      </div>
                      <div class="col-sm-9 col-xs-12 text-truncate no-left-padding">
                        <strong>
                          <a [routerLink]="[service.id]">{{ service.data.name }}</a>
                        </strong>
                        <br>
                        {{ service.data.description }}
                      </div>
                    </div>
                  </span>
                  <span class="col-xs-2 no-right-padding text-right hover privileges-menu">
                    <button class="cpbtn cpbtn--cancel hover" data-toggle="dropdown">
                      <span>
                        <i class="material-icons">mode_edit</i>
                        <i class="material-icons">arrow_drop_down</i>
                      </span>
                    </button>

                    <ul class="dropdown-menu dropdown-menu-right privileges-menu__list">
                      <li
                        class="privileges-menu__item"
                        *ngFor="let privilege of privileges"
                        (click)="updateService(service.id, 'type', privilege.type)">
                        <div class="row">
                          <div class="col-xs-2 text-center no-right-padding">
                            <i
                              class="material-icons"
                              *ngIf="service.type === privilege.type">check</i>
                          </div>
                          <div class="col-xs-10 no-left-padding">
                            <p class="privileges-menu__item--title" i18n>
                              {{ privilege.title }}
                            </p>
                            <p
                              [innerHTML]="privilege.description"
                              class="privileges-menu__item--description" i18n>
                            </p>
                          </div>
                        </div>
                      </li>
                    </ul>
                  </span>
                  <span
                    class="col-xs-1 hover text-right delete-button"
                    (click)="removeSelectedService(service)">
                    &times;
                  </span>
                </div>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="cpmodal__footer">
    <div class="row">
      <div class="col-xs-6 col-xs-offset-6 text-right">
        <button
          type="button"
          class="cpbtn cpbtn--cancel"
          data-dismiss="modal" i18n>
          Cancel
        </button>

        <button
          type="button"
          (click)="onSubmit()"
          class="cpbtn cpbtn--primary"i18n>
          Done
        </button>
      </div>
    </div>
  </div>
</div>
