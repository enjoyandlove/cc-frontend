<div [ngSwitch]="loading$ | async">
  <cp-spinner *ngSwitchCase="true"></cp-spinner>

  <div *ngSwitchCase="false">
    <div class="row justify-content-center">
      <div class="col-8 location">
        <cp-card class="location__header">
          <div class="row">
            <div class="col-12">
              <cp-resource-banner [resourceBanner]="resourceBanner"></cp-resource-banner>
              <div class="row location__buttons">
                <div class="col-6">
                  <a
                    cpTarget="edit"
                    [routerLink]="['../edit']"
                    class="cpbtn cpbtn--primary">
                    {{ 'edit' | cpI18n }}
                  </a>
                </div>
                <div class="col-6 text-right">
                  <span
                    cpTarget="icon"
                    class="location__icon"
                    [ngStyle]="{'background' : '#' + location.category_color}">
                      <img [src]="location.category_img_url">
                  </span>
                </div>
              </div>
            </div>
          </div>
        </cp-card>

        <div class="row">
          <div class="col-12">
            <cp-card class="location__details">
              <div class="row">
                <div class="col-12">

                  <div class="row" *ngIf="location.phone">
                    <div class="col-2">
                      <p>
                        <strong>
                          {{ 'phone' | cpI18n }}
                        </strong>
                      </p>
                    </div>
                    <div class="col-10">
                      <p cpTarget="phone">{{ location.phone }}</p>
                    </div>
                  </div>

                  <div class="row" *ngIf="location.email">
                    <div class="col-2">
                      <p>
                        <strong>
                          {{ 'email' | cpI18n }}
                        </strong>
                      </p>
                    </div>
                    <div class="col-10">
                      <p cpTarget="email">{{ location.email }}</p>
                    </div>
                  </div>

                  <div class="row" *ngIf="location.address">
                    <div class="col-2">
                      <p>
                        <strong>
                          {{ 'address' | cpI18n }}
                        </strong>
                      </p>
                    </div>
                    <div class="col-10">
                      <p cpTarget="address">{{ location.address }}</p>
                    </div>
                  </div>
                </div>
              </div>

              <div class="row">
                <div class="col-12 location__map">
                  <cp-maps
                    [center]="mapCenter"
                    [draggable]="draggable">
                  </cp-maps>
                </div>
              </div>
            </cp-card>
          </div>
        </div>

        <div class="row" *ngIf="hasMetaData">
          <div class="col-12">
            <cp-card class="location__details">
              <div *ngIf="location.short_name">
                <p>
                  <strong>
                    {{ 'locations_label_acronym' | cpI18n }}
                  </strong>
                </p>
                <p cpTarget="acronym">{{ location.short_name }}</p>
              </div>

              <div *ngIf="location.description">
                <p>
                  <strong>
                    {{ 'description' | cpI18n }}
                  </strong>
                </p>
                <p
                  cpTarget="description"
                  class="render_line_breaks">
                    {{ location.description }}
                </p>
              </div>

              <div *ngIf="location.links[0]?.label">
                <p>
                  <strong cpTarget="label">
                    {{ location.links[0].label }}
                  </strong>
                </p>
              </div>

              <div *ngIf="location.links[0]?.url">
                <p>
                  <a
                    cpTarget="url"
                    target="_blank"
                    [href]="location.links[0].url"
                    class="cpbtn cpbtn--no-border cpbtn--no-padding cpbtn--secondary">
                    {{ location.links[0].url }}
                  </a>
                </p>
              </div>
            </cp-card>
          </div>
        </div>

        <div class="row" *ngIf="location.schedule.length">
          <div class="col-12">
            <cp-card class="location__details">
              <p><strong>{{ 't_locations_opening_hours' | cpI18n }}</strong></p>

              <div class="row" *ngFor="let openingHour of openingHours; let i = index">
                <div class="col-2">
                  <p>{{ openingHour.day | locationsDayLabel | cpI18n }}</p>
                </div>
                <div class="col-10">
                  <p [cpTarget]="'time_' + i">{{ openingHour.time }}</p>
                </div>
              </div>
            </cp-card>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>