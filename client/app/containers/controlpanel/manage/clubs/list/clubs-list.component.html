<div class="row">
  <div class="col-xs-12">
    <cp-clubs-list-action-box
      (filter)="doFilter($event)">
    </cp-clubs-list-action-box>
  </div>
</div>

<div [ngSwitch]="loading">
  <cp-spinner *ngSwitchCase="true"></cp-spinner>

  <div *ngSwitchCase="false">
    <div *ngIf="state.clubs.length">
      <ul class="cp-form clubs">
        <li class="cp-form__header col-xs-12">
          <div class="row">
            <span class="col-xs-5" i18n>Name</span>
            <span class="col-xs-2" i18n>Status</span>
            <span class="col-xs-2" i18n>Members</span>
            <span class="col-xs-2" i18n>Events</span>
            <span class="col-xs-1"></span>
          </div>
        </li>

        <li class="cp-form__item col-xs-12" *ngFor="let club of state.clubs">
          <div class="row">
            <span class="col-xs-5 text-truncate clubs__thumbnail">
              <img
                class="img-rounded"
                [src]="club.logo_url"
                *ngIf="club.logo_url !== ''">
              <img
                class="img-rounded"
                src="/dist/default/user.png"
                *ngIf="club.logo_url === ''">
              <strong>
                  <a [routerLink]="[club.id + '/info']">
                    {{ club.name }}
                  </a>
              </strong>
              <br>
              {{ club.description }}
            </span>
            <span class="col-xs-2 text-truncate">
              {{ clubStatus[club.status] }}
              <ng-container *ngIf="club.status === PENDING_STATUS">
                <button
                  type="button"
                  class="cpbtn cpbtn--link"
                  (click)="onApproveClub(club.id)">
                  (Approve)
                </button>
              </ng-container>
            </span>
            <span class="col-xs-2 text-truncate">
              {{ club.member_count !== -1 ? club.member_count : 'Disabled' }}
            </span>
            <span class="col-xs-2 text-truncate">
              {{ club.total_item_count }}
            </span>

            <span
              (click)="deleteClub = club"
              data-toggle="modal" data-target="#deleteClubsModal"
              class="col-xs-1 hover text-center text-truncate delete-club pull-right">
              &times;
            </span>
          </div>
        </li>
      </ul>

      <div class="row">
        <div class="col-xs-12">
          <cp-pagination
            [pageNext]="pageNext"
            [pagePrev]="pagePrev"
            [pageNumber]="pageNumber"
            (next)="onPaginationNext()"
            (previous)="onPaginationPrevious()">
          </cp-pagination>
        </div>
      </div>
    </div>

    <cp-no-content
      class="no-content"
      *ngIf="!state.clubs.length"
      noContentText="No clubs found...">
    </cp-no-content>
  </div>
</div>

<cp-modal modalId="deleteClubsModal">
  <cp-clubs-delete
    [club]="deleteClub"
    (deletedClub)="onDeletedClub($event)">
  </cp-clubs-delete>
</cp-modal>


