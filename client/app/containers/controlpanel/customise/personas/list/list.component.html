<div class="row">
  <div class="col-12">
    <cp-personas-list-action-box
      (search)="onSearch($event)"
      (filterBy)="onFilterByPersonaType($event)">
    </cp-personas-list-action-box>
  </div>
</div>

<div [ngSwitch]="loading">
  <cp-spinner *ngSwitchCase="true"></cp-spinner>

  <div *ngSwitchCase="false">
    <cp-no-content
      class="no-content"
      *ngIf="!state.personas.length"
      [noContentText]="cpI18n.translate('t_personas_no_results_found')">
    </cp-no-content>

    <div *ngIf="state.personas.length">
      <ul class="personas cp-form">
        <li 
          class="cp-form__item col-12" 
          *ngFor="let persona of state.personas; let i = index">
          <div class="row">
            <span class="col-5 text-truncate personas__name">
              {{ persona.localized_name_map.en }}
            </span>
            <span class="col-7 float-right personas__actions text-right">
              <fieldset [disabled]="state.updating">
                <button 
                  type="button"
                  [disabled]="i === 0"
                  class="cpbtn cpbtn--link"
                  (click)="onRankUp(persona, i)">
                  <i class="material-icons">keyboard_arrow_up</i>
                </button>
                <button 
                  type="button"
                  class="cpbtn cpbtn--link"
                  (click)="onRankDown(persona, i)"
                  [disabled]="i === state.personas.length - 1">
                  <i class="material-icons">keyboard_arrow_down</i>
                </button>
                <a 
                  [routerLink]="[persona.id]"
                  class="cpbtn cpbtn--link">
                  <i class="material-icons">settings_applications</i>
                  {{'t_persona_list_button_customize' | cpI18n }}
                </a>
                <a
                  cpTracker
                  [eventData]="eventData"
                  [routerLink]="[persona.id + '/edit']"
                  class="cpbtn cpbtn--link">
                  <i class="material-icons">edit</i>
                  {{'t_persona_list_button_edit' | cpI18n }}
                </a>
              </fieldset>
            </span>
          </div>
        </li>
      </ul>

      <cp-pagination
        [pageNext]="pageNext"
        [pagePrev]="pagePrev"
        [pageNumber]="pageNumber"
        (next)="onPaginationNext()"
        (previous)="onPaginationPrevious()">
      </cp-pagination>
    </div>
  </div>
</div>